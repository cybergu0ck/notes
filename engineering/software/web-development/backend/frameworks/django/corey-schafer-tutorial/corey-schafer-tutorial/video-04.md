
# Creating databases using `models.py`

```python
#models.py

from django.db import models
from django.utils import timezone
from django.contrib.auth.models import User

class Post(models.Model):
    title = models.CharField(max_length=100)
    content = models.TextField()
    date_posted = models.DateTimeField(default = timezone.now)
    author = models.ForeignKey(User, on_delete = models.CASCADE)
    
```


<br/>
<br/>

# The `makemigration` command

Now, run the following command in the terminal

```bash
python manage.py makemigration
```

```
Migrations for 'blog':
  blog\migrations\0001_initial.py
    - Create model Post
```
This will create a file (0001_initial.py in our case) in blog\\migrations directory.

<br/>
<br/>

# To check the actual sql commands that will be run by django

```bash
python manage.py sqlmigrate <app> <migration_number>
```

<br/>
In our case, it'll be
```bash
python manage.py sqlmigrate blog 0001
```

```
CREATE TABLE "blog_post" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "title" varchar(100) NOT NULL, "content" text NOT NULL, "date_posted" datetime NOT NULL, "author_id" integer NOT NULL REFERENCES "auth_user" ("id") DEFERRABLE INITIALLY DEFERRED);
CREATE INDEX "blog_post_author_id_dd7a8485" ON "blog_post" ("author_id");
COMMIT;
```

<br/>
<br/>

# The `migrate` command

for the migrations to take effect (the stuff generated by makemigrations command), we need to run

```bash
python manage.py migrate
```